学习笔记

作业：1pandas.ipynb

### `np.nan` 须知

`np.nan` 不可比：
`nan` 不小于或大于 `inf` 或 `-inf`，因为实际上它与任何这些数字或任何数字都不可比。
与任何数字相比，它将返回" False"！
`nan` 与其他数字运算结果还是 `nan`。

### `pandas` 选择数据
#### 直接选择
选取列，只能通过**列标签**选取：
比如：`df['A']`。还可以写成：`df.A`。
若选取多列，必须用**列表**表示：`df[['A', 'C']]`。

选取行，注意两种方式都不能**省略** `:` 这个符号，否则都会当成列的 `key` 的：
1. 通过**行标签**。
若行标签是日期，`df['20200708': '20200708']` 选取日期为 2020-07-08 的一行。选取多行：`f['20200708': '20200710']`，这里既包含开始标签，又包含结束标签。结果为 3 行。
2. 通过**行索引**。索引从编号 0 开始。
比如，选取所有：` df[:]`。选取前两行：`df[:2]`。

**注意**：若选取第 2 行，不能使用 `df[1]`。因为会把 `1` 当成列标签表示。可以使用 `df[1:2]`。
#### 根据标签选择
这里使用到了函数 `loc`，若使用了标签的切片，则**开始标签，结束标签都会包括在的**。

第二维可以省略，选取的是行。第一维不能省略。
行、列之间使用 `,` 分隔。可以使用**标签切片**，**列表**、**单标签**等多种方式。

以下方式都是正确的：
```py
df.loc['20200710']
df.loc[['20200708', '20200713']]  # 列可以省略，行不能
df.loc[:, ['A', 'C']]
df.loc['20200712': '20200713', ['A', 'C']]
```
#### 根据序列索引
使用 `iloc` 可以通过行索引、列索引进行选择。这里要按照索引切片，包括开始索引，不包括结束索引。
与 `loc` 用法差不多，只是上面的标签全部换成索引就行。

下面都是正确的用法。
```py
df.iloc[0]
df.iloc[0, 0]
df.iloc[2:4]  # 列可以省略，行不能
df.iloc[[1, 3, 4], 2:3]
df.iloc[2:4, 2:3]
```
#### 根据判断
`Datafram` 里面可以是 bool 判断，比如
```
df[(df['A'] < 5) & (df['C'] < 4)]
df[df.A > 12]
```
也可以是计算结果，比如：

若要选择第 2，3，4 列，又不想使用 `iloc` 函数，可以使用 `df[df.columns[1:4]]`。 




